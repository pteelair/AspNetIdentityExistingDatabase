# AspNetIdentityExistingDatabase
Example project to use AspNet One Identity on an existing database. Primarily focusing only on User table. This assumes flexibility of changing user table to map to AspNet column names or map to table definition

Changes:
IdentityModel.cs file changes:
1. Changed ApplicationUser class to MyUser, renaming all corresponding reference
2. Added override method for "OnModelCreating" for ApplicationDbContext class. This to map to existing database classes
3. Created custom MyPasswordHasher class to be able to leverage existing hashing algorithm and support already hashed password or existing users

AccountController.cs
1. Changes to property "SignInManager" to set MyPasswordHasher class to UserManager

UserName mapping changes:
The template by default supports only Email where Email and UserName are set to same
Changes have been made to views ForgotPassword.cshtml, Login.cshtml, Register.cshtml along with corresponding viewmodels and corresponding actions in AccountController

Database changes:
1. For sake of simplicity, scripts have been generated from the database generated by Code First approach of the template.
This to ensure the User table has same fields along with names.
Column names need not be same as this can be taken care by EF Fluent API where table names are mapped to Asp.Net Identity framework table in OnModelCreating override method in ApplicationDbContext class in IdentityModel.cs
Example: 
Assuming column name in existing database is EmailId, below is how mapping can be done. 
modelBuilder.Entity<MyUser>().ToTable("User").Property(u => u.Email).HasColumnName("EmailId");
